<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fun Puzzle Game</title>
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/2097/2097636.png" type="image/png">
    <style>
        body {
            font-family: 'Comic Sans MS', sans-serif;
            background-color: #ffe5ec;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
        }
        .container {
            text-align: center;
            padding: 20px;
            background: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            width: 80%;
            max-width: 600px;
        }
        .jumbled-box {
            background-color: #fef2c0;
            border: 2px dashed #ffa1a1;
            padding: 10px;
            font-size: 1.5em;
            margin: 20px 0;
            border-radius: 5px;
        }
        .drop-zone {
            min-height: 50px;
            border: 2px dashed #94d2bd;
            border-radius: 5px;
            padding: 10px;
            margin: 20px 0;
            background-color: #e9ffe9;
        }
        .word-piece {
            display: inline-block;
            background-color: #ffcad4;
            padding: 10px 15px;
            margin: 5px;
            cursor: grab;
            border-radius: 5px;
            font-size: 1.2em;
        }
        button {
            padding: 10px 20px;
            font-size: 1.2em;
            border: none;
            background-color: #94d2bd;
            color: white;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #74c69d;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Fun Puzzle Game</h1>
        <p>Drag and drop the letters to form the correct word!</p>
        <div class="jumbled-box" id="jumbled-box"></div>
        <div class="drop-zone" id="drop-zone">Drop letters here</div>
        <p id="message"></p>
        <button id="check">Check</button>
        <button id="new-word">New Word</button>
        <p id="score">Score: 0</p>
    </div>

    <script>
        const words = [...new Set([
            "cat", "dog", "bat", "rat", "fox", "bee", "owl", "cow", "ant", "hen"
        ])];
        let currentWord = "";
        let score = 0;

        function shuffleWord(word) {
            return word.split('').sort(() => Math.random() - 0.5).join('');
        }

        function generatePuzzle() {
            const jumbledBox = document.getElementById('jumbled-box');
            const dropZone = document.getElementById('drop-zone');
            document.getElementById('message').textContent = '';
            currentWord = words[Math.floor(Math.random() * words.length)];
            const shuffledWord = shuffleWord(currentWord);

            jumbledBox.innerHTML = '';
            dropZone.innerHTML = '';

            shuffledWord.split('').forEach(letter => {
                const letterElement = document.createElement('span');
                letterElement.textContent = letter;
                letterElement.className = 'word-piece';
                letterElement.draggable = true;
                letterElement.dataset.letter = letter;

                letterElement.addEventListener('dragstart', event => {
                    event.dataTransfer.setData('text', letter);
                });

                letterElement.addEventListener('touchstart', event => {
                    const touch = event.touches[0];
                    letterElement.dataset.touchX = touch.clientX;
                    letterElement.dataset.touchY = touch.clientY;
                });

                letterElement.addEventListener('touchmove', event => {
                    event.preventDefault();
                    const touch = event.touches[0];
                    letterElement.style.position = 'absolute';
                    letterElement.style.left = `${touch.clientX}px`;
                    letterElement.style.top = `${touch.clientY}px`;
                });

                letterElement.addEventListener('touchend', () => {
                    const dropZone = document.getElementById('drop-zone');
                    const rect = dropZone.getBoundingClientRect();
                    const touchX = parseInt(letterElement.dataset.touchX);
                    const touchY = parseInt(letterElement.dataset.touchY);

                    if (
                        touchX >= rect.left &&
                        touchX <= rect.right &&
                        touchY >= rect.top &&
                        touchY <= rect.bottom
                    ) {
                        dropZone.appendChild(letterElement);
                        letterElement.style.position = 'static';
                    } else {
                        letterElement.style.position = 'static';
                    }
                });

                jumbledBox.appendChild(letterElement);
            });
        }

        document.getElementById('drop-zone').addEventListener('dragover', event => {
            event.preventDefault();
        });

        document.getElementById('drop-zone').addEventListener('drop', event => {
            event.preventDefault();
            const letter = event.dataTransfer.getData('text');

            const droppedLetter = document.createElement('span');
            droppedLetter.textContent = letter;
            droppedLetter.className = 'word-piece';
            droppedLetter.draggable = true;
            droppedLetter.dataset.letter = letter;

            droppedLetter.addEventListener('dragstart', event => {
                event.dataTransfer.setData('text', letter);
                droppedLetter.remove();
                const originalLetter = document.querySelector(`.jumbled-box span[data-letter="${letter}"]`);
                if (originalLetter) originalLetter.style.display = 'inline-block';
            });

            document.getElementById('drop-zone').appendChild(droppedLetter);

            const originalLetter = document.querySelector(`.jumbled-box span[data-letter="${letter}"]`);
            if (originalLetter) originalLetter.style.display = 'none';
        });

        document.getElementById('check').addEventListener('click', () => {
            const guessedWord = Array.from(document.getElementById('drop-zone').children).map(el => el.textContent).join('');

            if (guessedWord === currentWord) {
                document.getElementById('message').textContent = 'Correct! Well done!';
                score++;
                generatePuzzle();
            } else {
                document.getElementById('message').textContent = `Incorrect! The correct word was: ${currentWord}`;
                generatePuzzle();
            }

            document.getElementById('score').textContent = `Score: ${score}`;
        });

        document.getElementById('new-word').addEventListener('click', generatePuzzle);

        generatePuzzle();
    </script>
</body>
</html>
